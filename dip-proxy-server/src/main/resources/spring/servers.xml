<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
      http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans.xsd
    
      http://www.springframework.org/schema/tx 
      http://www.springframework.org/schema/tx/spring-tx.xsd
      
      http://www.springframework.org/schema/aop 
      http://www.springframework.org/schema/aop/spring-aop.xsd">


 <!-- reference proxy -->

 <bean id="referenceProxy" init-method="initialize"
       class="edu.ucla.mbi.proxy.RemoteProxyServer">
  <property name="address">
   <value>
     http://%%URL%%/dip-proxy/proxy-service    
   </value>
  </property>
  <property name="context">
    <map/>
  </property>
 </bean>


 <!-- UNIVERSAL REST SERVER -->

 <bean id="nativeRestServer" init-method="initialize" 
       class="edu.ucla.mbi.proxy.NativeRestServer">

    <property name="context">
        <map>
            <entry key="restServerContext">
                <ref bean="restServerContext"/>
            </entry>
            <entry key="contextTop" value="restServer"/>
        </map>
    </property>
 </bean>

 <!-- EBI proxy services -->
 
 <bean id="ebiReferenceServer" init-method="initialize" 
       class="edu.ucla.mbi.proxy.ebi.EbiServer"> 

  <property name="context">
    <map>
      <entry key="picrEndpoint">  
        <value>http://www.ebi.ac.uk/Tools/picr/service</value>
      </entry>
      
      <entry key="searchDbList">
       <list>
        <value>SEGUID</value>
        <value>SWISSPROT</value>
        <value>SWISSPROT_VARSPLIC</value>
        <value>REFSEQ</value>
        <value>TREMBL</value>
        <value>TREMBL_VARSPLIC</value>
        <value>FLYBASE</value>
        <value>PIR</value>
        <value>SGD</value>
        <value>TAIR_ARABIDOPSIS</value>
        <value>PDB</value>
        <value>WORMBASE</value>
       </list>
      </entry>

      <entry key="nativeRestServer">
        <ref bean="nativeRestServer"/>
      </entry>
       
    </map>
  </property>
 </bean>

 <!-- NCBI proxy services -->
 
 <bean id="ncbiReferenceServer" init-method="initialize" 
       class="edu.ucla.mbi.proxy.ncbi.NcbiServer">

  <property name="context">
    <map>
       <entry key="nativeRestServer">
         <ref bean="nativeRestServer"/>
       </entry>

       <entry key="isRetry" value="true"/><!-- dbCache has to be on -->

       <entry key="wsContext">
            <ref bean="wsContext"/>
       </entry>
<!--
       <entry key="ncbiReFetchThread">
            <ref bean="ncbiReFetchThread"/>
       </entry>
-->
    </map>
  </property>
 </bean>

<!-- 
 <bean id="ncbiReFetchThread"  scope="prototype"
       class="edu.ucla.mbi.proxy.ncbi.NcbiReFetchThread">

  <property name="wsContext" ref="wsContext"/>
  <property name="nativeRestServer" ref="nativeRestServer"/>
  <property name="threadRunMinutes" value="10"/>
 </bean>
-->
 <!-- Prolinks proxy services -->
 
 <bean id="prlReferenceServer" init-method="initialize"
       class="edu.ucla.mbi.proxy.prolinks.ProlinksServer">
  <property name="context">
    <map>
        <entry key="nativeRestServer">
            <ref bean="nativeRestServer"/>              
        </entry>
    </map> 
  </property>
 </bean>
 
 <!-- DIP proxy services -->

 <bean id="dipReferenceServer" init-method="initialize"
       class="edu.ucla.mbi.proxy.dip.DipServer">

  <property name="context">
    <map>
      <entry key="dipLegacyEndpoint">
        <value>http://dip.doe-mbi.ucla.edu/dip-legacy/dxf</value>
      </entry>

      <entry key="dipEndpoint">
        <value>http://10.1.200.203:8080/dip-database-server/dxf-service</value>
      </entry>
    </map>
  </property>
 </bean>
 </beans>
