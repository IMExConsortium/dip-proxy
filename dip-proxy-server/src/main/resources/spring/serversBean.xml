<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
      http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    
      http://www.springframework.org/schema/tx 
      http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
      
      http://www.springframework.org/schema/aop 
      http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

 <!-- distributed hash configuration -->

 <bean id="dht" class="edu.ucla.mbi.proxy.router.Dht" 
       init-method="initialize" destroy-method="cleanup">
<!-- 
  <property name="overlayMode" value="networked" />
-->

  <property name="overlayMode" value="standalone" />

  <property name="routingAlgorithm">
    <value>Chord</value>
  </property>

  <property name="proxyPort">
    <value>50610</value>
  </property>

  <property name="bootServers">
    <list>
<!--     
     <value>10.1.1.204</value> 
     <value>10.1.1.205</value>
     <value>10.1.1.206</value>
     <value>10.1.1.207</value>
-->
     <value>128.97.39.180</value>
    </list>
  </property>

 </bean>

 <bean id="ebiDhtRouter" class="edu.ucla.mbi.proxy.router.DhtRouter">
  <property name="dht">
   <ref bean="dht"/>
  </property>

  <property name="maxRetry">
    <value>3</value>
  </property>
 </bean>

 <bean id="ncbiDhtRouter" class="edu.ucla.mbi.proxy.router.DhtRouter">
  <property name="dht">
   <ref bean="dht"/>
  </property>

  <property name="maxRetry">
    <value>3</value>
  </property>
 </bean>

 <bean id="mbiDhtRouter" class="edu.ucla.mbi.proxy.router.DhtRouter">
  <property name="dht">
   <ref bean="dht"/>
  </property>

  <property name="maxRetry">
    <value>3</value>
  </property>
 </bean>

 <bean id="dipDhtRouter" class="edu.ucla.mbi.proxy.router.DhtRouter">
  <property name="dht">
   <ref bean="dht"/>
  </property>

  <property name="maxRetry">
    <value>3</value>
  </property>
 </bean>

 <bean id="yeastMineDhtRouter" class="edu.ucla.mbi.proxy.router.DhtRouter">
  <property name="dht">
   <ref bean="dht"/>
  </property>

  <property name="maxRetry">
    <value>3</value>
  </property>
 </bean>

 <!-- reference proxy -->
 <bean id="referenceProxy" init-method="initialize"
       class="edu.ucla.mbi.proxy.RemoteProxyServer">
  <property name="address">
   <value>
     http://%%URL%%/dip-proxy-server/proxy-service    
   </value>
  </property>
  <property name="context">
    <map/>
  </property>
 </bean>

 <bean id="remoteServerImpl" 
       class="edu.ucla.mbi.proxy.RemoteServerImpl">

  <property name="context">
    <map>
        <entry key="pubmed">
            <ref bean="pubmedRestServer"/>
        </entry>
        <entry key="refseq">
            <ref bean="refseqRestServer"/>
        </entry>
        <entry key="entrezgene">
            <ref bean="entrezgeneRestServer"/>
        </entry>
        <entry key="taxon">
            <ref bean="taxonRestServer"/>
        </entry>
        <entry key="yeastmine">
            <ref bean="yeastMineRestServer"/>
        </entry>
        <entry key="prolinks">
            <ref bean="prolinksRestServer"/>
        </entry>
        <entry key="uniprot">
            <ref bean="uniprotRestServer"/>
        </entry>
        <entry key="yeastmine">
            <ref bean="yeastMineRestServer"/>
        </entry>
    </map>
  </property>
 </bean>

 <!-- EBI proxy services -->
 
 <bean id="ebiReferenceServer" init-method="initialize" 
       parent="remoteServerImpl"
       class="edu.ucla.mbi.proxy.ebi.EbiServer">

  <property name="context">
    <map>
      <entry key="picrEndpoint">  
        <value>http://www.ebi.ac.uk/Tools/picr/service</value>
      </entry>
      
      <entry key="searchDbList">
       <list>
        <value>SEGUID</value>
        <value>SWISSPROT</value>
        <value>SWISSPROT_VARSPLIC</value>
        <value>REFSEQ</value>
        <value>TREMBL</value>
        <value>TREMBL_VARSPLIC</value>
        <value>FLYBASE</value>
        <value>PIR</value>
        <value>SGD</value>
        <value>TAIR_ARABIDOPSIS</value>
        <value>PDB</value>
        <value>WORMBASE</value>
       </list>
      </entry>
    </map>
  </property>
 </bean>

 <!-- NCBI proxy services -->
 
 <bean id="ncbiReferenceServer" parent="remoteServerImpl" 
       class="edu.ucla.mbi.proxy.ncbi.NcbiServer">

  <property name="context">
    <map>
      <entry key="nlmEsearch">
        <ref bean="nlmEsearchRestServer"/>
      </entry>
      <entry key="nlmEfetch">
        <ref bean="nlmEfetchRestServer"/>
      </entry>
    </map>
  </property>
 </bean>


 <!-- Prolinks proxy services -->
 
 <bean id="prlReferenceServer" parent="remoteServerImpl"
       class="edu.ucla.mbi.proxy.prolinks.ProlinksServer">
  <property name="context">
    <map>
        <entry key="ncbiProxyAddress">
            <!--<value>http://dip.doe-mbi.ucla.edu/dip-proxy/ncbi-service</value> -->
            <value> http://10.1.1.201:8080/dip-proxy-server/proxy-service</value>
        </entry>
    </map> 
  </property>
 </bean>
 
 <!-- DIP proxy services -->

 <bean id="dipReferenceServer" init-method="initialize"
       parent="remoteServerImpl"
       class="edu.ucla.mbi.proxy.dip.DipServer">

  <property name="context">
    <map>
      <entry key="dipLegacyEndpoint">
        <value>http://dip.doe-mbi.ucla.edu/dip-legacy/dxf</value>
      </entry>

      <entry key="dipEndpoint">
        <value>http://10.1.1.203:8080/dip-database-server/dxf-service</value>
      </entry>
    </map>
  </property>
 </bean>

 <!-- yeastmine rest server -->
 
 <bean id="yeastMineRestServer" 
       class="edu.ucla.mbi.proxy.NativeRestServer">

  <property name="restServerContext">
    <map>
        <entry key="restUrl">
          <value>
            http://yeastmine.yeastgenome.org/yeastmine/service/query/results?query
                =&lt;query+name=""+model="genomic"
                +view="Gene.name+Gene.symbol+Gene.secondaryIdentifier
                    +Gene.organism.name+Gene.organism.taxonId
                    +Gene.organism.species"&gt;
                &lt;constraint+path="Gene.secondaryIdentifier"+op="="
                    +value="%%ACTAG%%"/&gt;
                &lt;/query&gt;&amp;format=xml

          </value>
        </entry>
        <entry key="restAcTag">
          <value>%%ACTAG%%</value>
        </entry>
    </map>
  </property>
 </bean>

 <!-- uniprot rest server -->

 <bean id="uniprotRestServer" 
       class="edu.ucla.mbi.proxy.NativeRestServer">
  <property name="restServerContext">
    <map>    
        <entry key="restUrl">
          <value>
            http://www.uniprot.org/uniprot/%%ACTAG%%.xml
          </value>
        </entry>
        <entry key="restAcTag">
          <value>%%ACTAG%%</value>
        </entry>
    </map>
  </property>
 </bean>

 <!-- prolinks rest server -->
 
 <bean id="prolinksRestServer" 
       class="edu.ucla.mbi.proxy.NativeRestServer">
  <property name="restServerContext">
    <map>
        <entry key="restUrl">
          <value>
            http://prl.mbi.ucla.edu/prlbeta/php_dip_service?id=%%ACTAG%%
          </value>
        </entry>
        <entry key="restAcTag">
          <value>%%ACTAG%%</value>
        </entry>
    </map>
  </property>
 </bean>

 <!-- pubmed rest server -->

 <bean id="pubmedRestServer" 
       class="edu.ucla.mbi.proxy.NativeRestServer">
  <property name="restServerContext">
    <map>
        <entry key="restUrl">
          <value>
            http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed
                &amp;retmode=xml&amp;id=%%ACTAG%%
          </value>
        </entry>
        <entry key="restAcTag">
          <value>%%ACTAG%%</value>
        </entry>
    </map>
  </property>
 </bean>

 <!-- refseq rest server -->

 <bean id="refseqRestServer" 
       class="edu.ucla.mbi.proxy.NativeRestServer">
  <property name="restServerContext">
    <map>
        <entry key="restUrl">
          <value>
            http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=protein
                &amp;id=%%ACTAG%%&amp;rettype=gpc&amp;retmode=xml
          </value>
        </entry>
        <entry key="restAcTag">
          <value>%%ACTAG%%</value>
        </entry>
    </map>
  </property>
 </bean>

 <!-- entrezgene rest server -->

 <bean id="entrezgeneRestServer" 
       class="edu.ucla.mbi.proxy.NativeRestServer">
  <property name="restServerContext">
    <map>
        <entry key="restUrl">
          <value>
            "http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=gene
                &amp;id=%%ACTAG%%&amp;retmode=xml
          </value>
        </entry>
        <entry key="restAcTag">
          <value>%%ACTAG%%</value>
        </entry>
    </map>
  </property>
 </bean>

 <!-- taxon rest server -->

 <bean id="taxonRestServer" 
       class="edu.ucla.mbi.proxy.NativeRestServer">
  <property name="restServerContext">
    <map>
        <entry key="restUrl">
          <value>
            http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=taxonomy
                &amp;id=%%ACTAG%%&amp;retmode=xml
          </value>
        </entry>
        <entry key="restAcTag">
          <value>%%ACTAG%%</value>
        </entry>
    </map>
  </property>
 </bean>

 <!-- nlm esearch rest server -->

 <bean id="nlmEsearchRestServer" 
       class="edu.ucla.mbi.proxy.NativeRestServer">
  <property name="restServerContext">
    <map>
        <entry key="restUrl">
          <value>
            http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?
                db=nlmcatalog&amp;retmode=xml&amp;term=%%ACTAG%%[nlmid]
          </value>
        </entry>
        <entry key="restAcTag">
          <value>%%ACTAG%%</value>
        </entry>
    </map>
  </property>
 </bean>

 <!-- nlm efetch rest server -->

 <bean id="nlmEfetchRestServer" 
       class="edu.ucla.mbi.proxy.NativeRestServer">
  <property name="restServerContext">
    <map>
        <entry key="restUrl">
          <value>
            http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?
                db=nlmcatalog&amp;retmode=xml&amp;id=%%ACTAG%%
          </value>
        </entry>
        <entry key="restAcTag">
          <value>%%ACTAG%%</value>
        </entry>
    </map>
  </property>
 </bean>
</beans>
