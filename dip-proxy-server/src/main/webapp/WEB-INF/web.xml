<?xml version="1.0" encoding="ISO-8859-1"?>

<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
                         http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd"
    version="2.5">
<!--
 !==========================================================================
 ! $HeadURL::                                                              $
 ! $Id::                                                                   $
 ! Version: $Rev::                                                         $
 !==========================================================================
 !                                                                        
 ! dip-proxy: Web Application configuration file
 !                                                                        
 !====================================================================== -->

  <display-name>ProxyWS: Proxy Web Services</display-name>

<!-- ===================================================== ============= -->
<!-- ===================================================== CONTEXT setup -->
<!-- ===================================================== ============= -->

  <!-- ================================================== TILES context  -->
  <context-param>
    <param-name>
      org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG
    </param-name>
    <param-value>/WEB-INF/classes/tiles.xml</param-value>
  </context-param>

  <!-- ================================================= SPRING context  -->
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/classes/applicationContext.xml</param-value>    
  </context-param>

<!-- ===================================================== ============= -->
<!-- ===================================================== FILTERS setup -->
<!-- ===================================================== ============= -->

  <!-- ============================================ CONFIGURATION filter -->

  <filter>
    <filter-name>config-filter</filter-name>
    <filter-class>
        edu.ucla.mbi.proxy.ProxyConfigFilter  
    </filter-class>
  </filter>

  <!-- ================================================== STRUTS2 filter -->

  <filter>
    <filter-name>action2</filter-name>
    <filter-class>
        <!--org.apache.struts2.dispatcher.FilterDispatcher -->
        org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter 
    </filter-class>
  </filter>

  <filter-mapping>
    <filter-name>action2</filter-name>
    <url-pattern>*.do</url-pattern>
  </filter-mapping>

  <filter-mapping>
    <filter-name>action2</filter-name>
    <url-pattern>*.action</url-pattern>
  </filter-mapping>

  <filter-mapping>
    <filter-name>action2</filter-name>
    <url-pattern>*.jsp</url-pattern>
  </filter-mapping>
  
  <filter-mapping>
    <filter-name>action2</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
    
<!-- =================================================== =============== -->
<!-- =================================================== LISTENERS setup -->
<!-- =================================================== =============== -->

  <!-- ========================================== STRUTS2/TILES listener -->

  <listener>
    <listener-class>
      org.apache.struts2.tiles.StrutsTilesListener
    </listener-class>
  </listener>

  <!-- ================================================= SPRING listener -->
  <listener>
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>
  
  <!-- ================================================= JAX-WS listener -->


  <listener>
   <listener-class>
    com.sun.xml.ws.transport.http.servlet.WSServletContextListener
   </listener-class>
  </listener>

  <!-- ======================================= WSContextManager listener -->
  <listener>
   <listener-class>
    edu.ucla.mbi.server.WSContextManager
   </listener-class>
  </listener>




  <!-- =================================================== =============== -->
  <!-- =================================================== Servlet startup -->
  <!-- =================================================== =============== -->

<!--  STD JAVA Web Services
  <servlet>
   <servlet-name>dip-proxy</servlet-name>
   <servlet-class>
     com.sun.xml.ws.transport.http.servlet.WSServlet
   </servlet-class>
   <load-on-startup>1</load-on-startup>
  </servlet>
-->

 <!-- Spring Web Services  -->

  <servlet>
   <servlet-name>dip-proxy</servlet-name>
   <servlet-class>
    com.sun.xml.ws.transport.http.servlet.WSSpringServlet
   </servlet-class>
  </servlet>


<!-- =================================================== =============== -->
<!-- =================================================== Servlet mapping -->
<!-- =================================================== =============== -->

  <servlet-mapping>
   <servlet-name>dip-proxy</servlet-name>
   <url-pattern>/dht-service</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
   <servlet-name>dip-proxy</servlet-name>
   <url-pattern>/proxy-service</url-pattern>
  </servlet-mapping>

   <servlet-mapping>
   <servlet-name>dip-proxy</servlet-name>
   <url-pattern>/ebi-service</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
   <servlet-name>dip-proxy</servlet-name>
   <url-pattern>/ncbi-service</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
   <servlet-name>dip-proxy</servlet-name>
   <url-pattern>/dip-service</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
   <servlet-name>dip-proxy</servlet-name>
   <url-pattern>/prolinks-service</url-pattern>
  </servlet-mapping>

  <mime-mapping>
        <extension>inc</extension>
        <mime-type>text/plain</mime-type>
  </mime-mapping>


<!-- ===================================================== ============= -->
<!-- ===================================================== Welcome pages -->
<!-- ===================================================== ============= -->

  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  
</web-app>
